<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sugerencia de Nombres Similares</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .contenedor {
            background-color: #fff;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            max-width: 500px;
            width: 100%;
        }

        h1 {
            text-align: center;
            color: #333;
        }

        input {
            padding: 10px;
            margin: 10px 0;
            width: 100%;
            box-sizing: border-box;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        button {
            padding: 10px;
            width: 100%;
            box-sizing: border-box;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        button:hover {
            background-color: #0056b3;
        }

        .resultados {
            margin-top: 20px;
        }

        .resultados ul {
            list-style-type: none;
            padding: 0;
        }

        .resultados li {
            background: #f9f9f9;
            margin: 5px 0;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
    </style>
</head>

<body>
    <div class="contenedor">
        <h1>Sugerencia de Nombres Similares</h1>
        <input type="text" id="nombreConsulta" placeholder="Introduce un nombre">
        <button onclick="buscarNombres()">Buscar Nombres Similares</button>
        <div class="resultados">
            <h2>Resultados:</h2>
            <ul id="listaResultados"></ul>
        </div>
    </div>

    <script>
        class Nodo {
            constructor(punto) {
                this.punto = punto;
                this.hijos = {};
            }
        }

        class ArbolBK {
            constructor(funcionDistancia) {
                this.raiz = null;
                this.funcionDistancia = funcionDistancia;
            }

            agregar(punto) {
                if (this.raiz === null) {
                    this.raiz = new Nodo(punto);
                } else {
                    this._agregar(this.raiz, punto);
                }
            }

            _agregar(nodo, punto) {
                const distancia = this.funcionDistancia(nodo.punto, punto);
                if (nodo.hijos[distancia] === undefined) {
                    nodo.hijos[distancia] = new Nodo(punto);
                } else {
                    this._agregar(nodo.hijos[distancia], punto);
                }
            }

            buscar(punto, distanciaMaxima) {
                const resultados = [];
                if (this.raiz) {
                    this._buscar(this.raiz, punto, distanciaMaxima, resultados);
                }
                return resultados;
            }

            _buscar(nodo, punto, distanciaMaxima, resultados) {
                const distancia = this.funcionDistancia(nodo.punto, punto);
                if (distancia <= distanciaMaxima) {
                    resultados.push({ punto: nodo.punto, distancia: distancia });
                }
                for (let d = Math.max(0, distancia - distanciaMaxima); d <= distancia + distanciaMaxima; d++) {
                    if (nodo.hijos[d] !== undefined) {
                        this._buscar(nodo.hijos[d], punto, distanciaMaxima, resultados);
                    }
                }
            }
        }

        function distanciaLevenshtein(a, b) {
            // Crear una matriz de tamaño (a.length + 1) x (b.length + 1)
            const matriz = [];

            // Inicializar la primera columna y la primera fila
            for (let i = 0; i <= b.length; i++) {
                matriz[i] = [i];
            }
            for (let j = 0; j <= a.length; j++) {
                matriz[0][j] = j;
            }

            // Llenar la matriz con las distancias parciales
            for (let i = 1; i <= b.length; i++) {
                for (let j = 1; j <= a.length; j++) {
                    // Si los caracteres actuales son iguales, no hay costo de sustitución
                    if (b.charAt(i - 1) === a.charAt(j - 1)) {
                        matriz[i][j] = matriz[i - 1][j - 1];
                    } else {
                        // Tomar el mínimo entre eliminar, insertar y sustituir
                        matriz[i][j] = Math.min(
                            matriz[i - 1][j - 1] + 1,  // Sustitución
                            Math.min(matriz[i][j - 1] + 1,  // Inserción
                                matriz[i - 1][j] + 1)  // Eliminación
                        );
                    }
                }
            }
            return matriz[b.length][a.length];
        }

        const nombres = [
            "Alice", "Bob", "Charlie", "David", "Eve", "Frank", "Grace", "Hank", "Ivy", "Jack", "Kathy", "Leo",
            "Mona", "Nina", "Oscar", "Paul", "Quincy", "Rachel", "Sam", "Tina", "Uma", "Victor", "Wendy",
            "Xander", "Yara", "Zane", "Abby", "Ben", "Clara", "Dan", "Ellie", "Finn", "Gina", "Harry", "Isla",
            "Jake", "Kara", "Liam", "Mia", "Nate", "Olivia", "Pete", "Quinn", "Ruth", "Steve", "Tara", "Ursula",
            "Vince", "Will", "Xena", "Yuri", "Zoe"
        ];
        const arbol = new ArbolBK(distanciaLevenshtein);

        nombres.forEach(nombre => arbol.agregar(nombre));

        function buscarNombres() {
            const nombreConsulta = document.getElementById("nombreConsulta").value.trim();
            if (nombreConsulta === '') {
                alert("Por favor, introduce un nombre.");
                return;
            }
            const distanciaMaxima = 2;
            const nombresSimilares = arbol.buscar(nombreConsulta, distanciaMaxima);
            const listaResultados = document.getElementById("listaResultados");
            listaResultados.innerHTML = '';

            if (nombresSimilares.length === 0) {
                const elementoLista = document.createElement("li");
                elementoLista.textContent = "No se encontraron nombres similares.";
                listaResultados.appendChild(elementoLista);
            } else {
                nombresSimilares.forEach(resultado => {
                    const elementoLista = document.createElement("li");
                    elementoLista.textContent = `${resultado.punto} (Distancia: ${resultado.distancia})`;
                    listaResultados.appendChild(elementoLista);
                });
            }
        }
    </script>
</body>

</html>